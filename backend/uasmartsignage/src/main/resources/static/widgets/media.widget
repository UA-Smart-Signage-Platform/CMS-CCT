<div style="top: [[top]]px; left: [[left]]px; width: [[width]]px; height: [[height]]px;">
    <video autoplay muted class="stretch" id="video[[widgetID]]"></video>
    <img class="stretch" style="display: none;" id="image[[widgetID]]">
</div>
<script>
    var videoList[[widgetID]] = ["[[videos]]"];
    var currentIndex[[widgetID]] = 0;

    function setVideoSource[[widgetID]](videoSrc) {

        let video = document.getElementById("video[[widgetID]]");
        let image = document.getElementById("image[[widgetID]]");

        if (videoSrc.endsWith('.mp4')) {
            video.src = videoSrc;
            video.style.display = 'block';
            image.style.display = 'none';
            video.play();
        } else {
            image.src = videoSrc;
            image.style.display = 'block';
            video.style.display = 'none';
            startTimer[[widgetID]]();
        }

        if (currentIndex[[widgetID]] == videoList[[widgetID]].length - 1){
            currentIndex[[widgetID]] = 0;
        }
        else{
            currentIndex[[widgetID]] += 1;
        }
    }

    setVideoSource[[widgetID]](videoList[[widgetID]][0]);

    function startTimer[[widgetID]]() {
        setTimeout(function() {
            setVideoSource[[widgetID]](videoList[[widgetID]][currentIndex[[widgetID]]]);
        }, 5000); 
    }

    document.getElementById("video[[widgetID]]").addEventListener("ended", function() {
        setVideoSource[[widgetID]](videoList[[widgetID]][currentIndex[[widgetID]]]);
    });
</script>
